<!DOCTYPE html>
<html lang="tr"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Risk Puanlama ve Hızlı Sözleşme Oluşturma</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#17cf73",
                        "primary-dark": "#10b981",
                        "background-main": "#020617", // Slate 950
                        "surface-card": "#0f172a",    // Slate 900
                        "surface-raised": "#1e293b",  // Slate 800
                        "text-main": "#f1f5f9",       // Slate 100
                        "text-sub": "#94a3b8",        // Slate 400
                        "border-color": "#1e293b",    // Slate 800
                        "input-bg": "#020617",        // Slate 950
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"],
                        "sans": ["Inter", "sans-serif"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "2xl": "1rem",
                        "full": "9999px"
                    },
                    boxShadow: {
                        'soft': '0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.3)',
                        'card': '0 0 0 1px rgba(30, 41, 59, 1), 0 1px 3px 0 rgba(0, 0, 0, 0.3)',
                        'glow': '0 0 20px -5px rgba(23, 207, 115, 0.15)'
                    }
                },
            },
        }
    </script>
<style>
        body {
            font-family: 'Inter', sans-serif;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
        ::-webkit-calendar-picker-indicator {
            filter: invert(1);
            opacity: 0.6;
        }
        
        /* Animasyonlar */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }
        
        .animate-pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        /* Form input focus efektleri */
        .form-input:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(23, 207, 115, 0.15);
        }
        
        /* Risk circle animasyonu */
        .risk-circle-animation {
            transition: stroke-dasharray 0.5s ease-out, stroke 0.3s ease-out;
        }
        
        /* Card hover efektleri */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }
        
        /* Gradient backgrounds */
        .gradient-primary {
            background: linear-gradient(135deg, rgba(23, 207, 115, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
        }
        
        .gradient-risk-safe {
            background: linear-gradient(135deg, rgba(23, 207, 115, 0.15) 0%, rgba(16, 185, 129, 0.08) 100%);
        }
        
        /* Input group animasyonu */
        .input-group {
            position: relative;
        }
        
        .input-group::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, #17cf73 0%, #10b981 100%);
            border-radius: 4px 0 0 4px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .input-group:focus-within::before {
            opacity: 1;
        }
        
        /* Risk score badge animasyonu */
        .risk-badge {
            transition: all 0.3s ease;
        }
        
        .risk-badge.animate {
            animation: pulse 1s ease-out;
        }
    </style>
</head>
<body class="bg-background-main text-text-main min-h-screen flex flex-col font-display transition-colors duration-200">
<header class="sticky top-0 z-40 w-full bg-surface-card/95 backdrop-blur-md border-b border-border-color transition-colors duration-200 shadow-lg shadow-black/20">
<div class="px-6 lg:px-10 py-4 flex items-center justify-between">
<div class="flex items-center gap-4 text-text-main">
<div class="size-10 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center border border-primary/20 shadow-sm">
<span class="material-symbols-outlined text-primary text-2xl">directions_car</span>
</div>
<div>
<h2 class="text-lg font-bold leading-tight tracking-tight">Kiralama Yöneticisi</h2>
<p class="text-xs text-text-sub hidden sm:block">Yeni Kiralama Modülü</p>
</div>
</div>
<div class="hidden md:flex flex-1 justify-end gap-8 items-center">
<nav class="flex items-center gap-6">
<a class="text-sm font-medium text-text-sub hover:text-primary transition-colors px-2 py-1 rounded-md hover:bg-surface-raised/50" href="#">Panel</a>
<a class="text-sm font-medium text-text-main hover:text-primary transition-colors px-2 py-1 rounded-md bg-surface-raised/50" href="#">Sözleşmeler</a>
<a class="text-sm font-medium text-text-sub hover:text-primary transition-colors px-2 py-1 rounded-md hover:bg-surface-raised/50" href="#">Cezalar &amp; Hasar</a>
<a class="text-sm font-medium text-text-sub hover:text-primary transition-colors px-2 py-1 rounded-md hover:bg-surface-raised/50" href="#">Profil</a>
</nav>
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 border-2 border-primary/30 cursor-pointer relative shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all hover:scale-105" data-alt="Kiralama yöneticisinin profil resmi" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBusZagYBwJU0BXuomTJwkkI8-qGPML1n12pxTxU9LvCpiA2b8DEle4BK81QeieD1egZfQDyrzcQ68GN6e4xVpPAtqI3cedl3t7qMaTor87Dtqe0eup0VA_RKtI9vTJoR2eqShbERBnaYLpD35L9qQVpjPmw-6Y7u1ribTGAXApED2w5g_OW-3fvafgmcdKqsvaDOs6mVyYWHPa36CD20f20dw9lmZOxiSajiOeNGU46yq1CN0tCEoljPkcMrPUgRluy66_7T-QUxkl");'>
<div class="absolute bottom-0 right-0 size-3 bg-primary rounded-full border-2 border-surface-card shadow-sm"></div>
</div>
</div>
<button class="md:hidden p-2 text-text-main hover:bg-surface-raised rounded-lg transition-colors">
<span class="material-symbols-outlined">menu</span>
</button>
</div>
</header>
<main class="flex-1 w-full max-w-7xl mx-auto px-4 md:px-8 lg:px-12 py-8">
<div class="flex flex-col lg:flex-row gap-8 animate-fade-in-up">
<div class="flex-1 flex flex-col gap-6">
<div class="flex flex-col gap-3 mb-2">
<div class="flex items-center gap-3">
<div class="size-12 rounded-xl bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center border border-primary/20">
<span class="material-symbols-outlined text-primary text-2xl">add_business</span>
</div>
<div class="flex-1">
<h1 class="text-3xl md:text-4xl font-black tracking-tight text-text-main">Yeni Kiralama Girişi</h1>
<p class="text-text-sub text-sm md:text-base font-normal mt-1">Risk durumunu kontrol etmek ve anında sözleşme oluşturmak için müşteri detaylarını girin.</p>
</div>
</div>
</div>
<div class="bg-surface-card border border-border-color rounded-xl p-6 md:p-8 shadow-card card-hover gradient-primary/30 relative overflow-hidden">
<div class="absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
<div class="relative z-10">
<form class="flex flex-col gap-6" onsubmit="event.preventDefault();">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<label class="flex flex-col gap-2.5 group input-group animate-slide-in" style="animation-delay: 0.1s">
<span class="text-sm font-semibold text-text-main group-focus-within:text-primary transition-colors flex items-center gap-2">
<span class="material-symbols-outlined text-base">badge</span>
Müşteri No / T.C. Kimlik No
</span>
<div class="relative">
<input id="customer-id" class="form-input w-full h-12 px-4 pl-11 rounded-lg border border-border-color bg-input-bg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none placeholder:text-gray-600 text-text-main" placeholder="örn. 123456789" type="text"/>
<span class="material-symbols-outlined absolute left-3 top-3.5 text-gray-500 text-lg pointer-events-none group-focus-within:text-primary transition-colors">badge</span>
<span class="material-symbols-outlined absolute right-3 top-3.5 text-gray-500 text-lg pointer-events-none group-focus-within:text-primary transition-colors opacity-0 group-focus-within:opacity-100">verified</span>
</div>
</label>
<label class="flex flex-col gap-2.5 group input-group animate-slide-in" style="animation-delay: 0.2s">
<span class="text-sm font-semibold text-text-main group-focus-within:text-primary transition-colors flex items-center gap-2">
<span class="material-symbols-outlined text-base">id_card</span>
Ehliyet Numarası
</span>
<div class="relative">
<input id="license-number" class="form-input w-full h-12 px-4 pl-11 rounded-lg border border-border-color bg-input-bg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none placeholder:text-gray-600 text-text-main" placeholder="örn. E-123-456" type="text"/>
<span class="material-symbols-outlined absolute left-3 top-3.5 text-gray-500 text-lg pointer-events-none group-focus-within:text-primary transition-colors">id_card</span>
<span class="material-symbols-outlined absolute right-3 top-3.5 text-gray-500 text-lg pointer-events-none group-focus-within:text-primary transition-colors opacity-0 group-focus-within:opacity-100">verified</span>
</div>
</label>
</div>
<div class="grid grid-cols-1 gap-6">
<label class="flex flex-col gap-2.5 group input-group animate-slide-in" style="animation-delay: 0.3s">
<span class="text-sm font-semibold text-text-main group-focus-within:text-primary transition-colors flex items-center gap-2">
<span class="material-symbols-outlined text-base">person</span>
Ad ve Soyad
</span>
<div class="relative">
<input id="customer-name" class="form-input w-full h-12 px-4 pl-11 rounded-lg border border-border-color bg-input-bg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none placeholder:text-gray-600 text-text-main" placeholder="Ali Yılmaz" type="text"/>
<span class="material-symbols-outlined absolute left-3 top-3.5 text-gray-500 text-lg pointer-events-none group-focus-within:text-primary transition-colors">person</span>
<span class="material-symbols-outlined absolute right-3 top-3.5 text-gray-500 text-lg pointer-events-none group-focus-within:text-primary transition-colors opacity-0 group-focus-within:opacity-100">verified</span>
</div>
</label>
</div>
<div class="grid grid-cols-1 gap-6">
<label class="flex flex-col gap-2.5 group input-group animate-slide-in" style="animation-delay: 0.4s">
<span class="text-sm font-semibold text-text-main group-focus-within:text-primary transition-colors flex items-center gap-2">
<span class="material-symbols-outlined text-base">directions_car</span>
Araç Seçimi
</span>
<div class="relative">
<select id="vehicle-select" class="form-input w-full h-12 px-4 pl-11 pr-10 rounded-lg border border-border-color bg-input-bg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none appearance-none cursor-pointer text-text-main">
<option disabled="" selected="" value="">Filodan bir araç seçin</option>
<option value="toyota-corolla">Toyota Corolla 2022 (Sedan) - Müsait</option>
<option value="ford-focus">Ford Focus 2021 (Hatchback) - Müsait</option>
<option value="bmw-320i">BMW 320i 2023 (Lüks) - Müsait</option>
</select>
<span class="material-symbols-outlined absolute left-3 top-3.5 text-gray-500 text-lg pointer-events-none group-focus-within:text-primary transition-colors">directions_car</span>
<span class="material-symbols-outlined absolute right-3 top-3.5 text-gray-500 text-lg pointer-events-none transition-colors">expand_more</span>
</div>
<div id="vehicle-info" class="hidden mt-2 p-3 rounded-lg bg-primary/10 border border-primary/20 animate-slide-in">
<div class="flex items-center gap-2 text-sm text-primary">
<span class="material-symbols-outlined text-base">info</span>
<span id="vehicle-details">Araç bilgileri burada görüntülenecek</span>
</div>
</div>
</label>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<label class="flex flex-col gap-2.5 group input-group animate-slide-in" style="animation-delay: 0.5s">
<span class="text-sm font-semibold text-text-main group-focus-within:text-primary transition-colors flex items-center gap-2">
<span class="material-symbols-outlined text-base">calendar_today</span>
Kiralama Başlangıç Tarihi
</span>
<input id="start-date" class="form-input w-full h-12 px-4 rounded-lg border border-border-color bg-input-bg focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none text-text-main" type="date"/>
</label>
<label class="flex flex-col gap-2.5 group animate-slide-in" style="animation-delay: 0.6s">
<span class="text-sm font-semibold text-text-main group-focus-within:text-primary transition-colors flex items-center gap-2 mb-1">
<span class="material-symbols-outlined text-base">schedule</span>
Süre (Gün)
</span>
<div class="flex items-center">
<button type="button" onclick="decreaseDays()" class="size-12 rounded-l-lg border border-r-0 border-border-color bg-surface-raised text-text-sub hover:bg-surface-card hover:text-primary hover:border-primary/50 flex items-center justify-center transition-all active:scale-95">
<span class="material-symbols-outlined text-sm">remove</span>
</button>
<input id="rental-days" class="h-12 w-full text-center border-y border-border-color bg-input-bg text-text-main font-semibold focus:outline-none focus:border-primary focus:z-10 focus:ring-1 focus:ring-primary/20 transition-all" type="number" value="3" min="1" max="365"/>
<button type="button" onclick="increaseDays()" class="size-12 rounded-r-lg border border-l-0 border-border-color bg-surface-raised text-text-sub hover:bg-surface-card hover:text-primary hover:border-primary/50 flex items-center justify-center transition-all active:scale-95">
<span class="material-symbols-outlined text-sm">add</span>
</button>
</div>
<div id="end-date-display" class="hidden mt-2 text-xs text-text-sub flex items-center gap-1">
<span class="material-symbols-outlined text-xs">event</span>
<span>Bitiş Tarihi: <span id="end-date-value" class="font-medium text-text-main"></span></span>
</div>
</label>
</div>
</form>
</div>
</div>
<div class="mt-4">
<button type="button" onclick="createContract()" id="create-contract-btn" class="group relative w-full flex items-center justify-center gap-3 bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white font-bold text-lg py-4 rounded-xl shadow-lg shadow-primary/30 transition-all active:scale-[0.98] hover:shadow-glow hover:shadow-primary/40">
<span class="material-symbols-outlined text-xl">description</span>
<span>Dijital Sözleşme Oluştur</span>
<span class="absolute right-6 opacity-0 group-hover:opacity-100 transition-all transform translate-x-[-4px] group-hover:translate-x-0 material-symbols-outlined">arrow_forward</span>
<div class="absolute inset-0 rounded-xl bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
</button>
<div class="mt-3 flex items-center justify-center gap-2 text-xs text-text-sub">
<span class="material-symbols-outlined text-sm">lock</span>
<span>Şifreli &amp; Güvenli İşlem</span>
<span class="mx-2">•</span>
<span class="material-symbols-outlined text-sm">verified</span>
<span>Anında İşlem</span>
</div>
</div>
</div>
<div class="lg:w-[380px] flex flex-col gap-6">
<div class="bg-surface-card rounded-xl border border-border-color shadow-card overflow-hidden transition-colors duration-200 card-hover gradient-risk-safe relative">
<div class="absolute top-0 right-0 w-40 h-40 bg-primary/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
<div class="relative z-10">
<div class="p-5 border-b border-border-color bg-gradient-to-r from-surface-raised/80 to-surface-raised/50 flex justify-between items-center backdrop-blur-sm">
<div class="flex items-center gap-3">
<div class="size-10 rounded-lg bg-primary/20 flex items-center justify-center border border-primary/30">
<span class="material-symbols-outlined text-primary text-xl">analytics</span>
</div>
<div>
<h3 class="font-bold text-text-main text-base">Risk Analizi</h3>
<p class="text-xs text-text-sub">AI Destekli Değerlendirme</p>
</div>
</div>
<span class="material-symbols-outlined text-primary animate-pulse-slow" title="Yapay zeka destekli analiz">smart_toy</span>
</div>
<div class="p-6 flex flex-col items-center">
<div class="relative size-36 mb-6">
<svg class="size-full -rotate-90 transform risk-circle-animation" viewBox="0 0 36 36">
<path class="text-surface-raised" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3"></path>
<path id="risk-circle" class="text-primary drop-shadow-lg risk-circle-animation" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-dasharray="85, 100" stroke-linecap="round" stroke-width="3.5"></path>
</svg>
<div class="absolute inset-0 flex flex-col items-center justify-center">
<span id="risk-score" class="text-4xl font-black text-text-main tracking-tighter risk-badge">85</span>
<span id="risk-status" class="text-xs font-bold uppercase text-primary tracking-wider mt-1">Güvenli</span>
</div>
<div class="absolute -bottom-2 left-1/2 -translate-x-1/2 text-[8px] text-text-sub font-medium">Risk Skoru</div>
</div>
<div class="w-full space-y-2.5 mt-2">
<div class="flex items-center gap-3 text-sm text-text-main p-2 rounded-lg hover:bg-surface-raised/50 transition-colors">
<div class="size-7 rounded-lg bg-primary/10 flex items-center justify-center shrink-0 border border-primary/20">
<span class="material-symbols-outlined text-sm text-primary">check_circle</span>
</div>
<span class="flex-1 font-medium">Kimlik Doğrulandı</span>
</div>
<div class="flex items-center gap-3 text-sm text-text-main p-2 rounded-lg hover:bg-surface-raised/50 transition-colors">
<div class="size-7 rounded-lg bg-primary/10 flex items-center justify-center shrink-0 border border-primary/20">
<span class="material-symbols-outlined text-sm text-primary">check_circle</span>
</div>
<span class="flex-1 font-medium">Ödenmemiş Borç Yok</span>
</div>
<div class="flex items-center gap-3 text-sm text-text-main p-2 rounded-lg hover:bg-surface-raised/50 transition-colors">
<div class="size-7 rounded-lg bg-primary/10 flex items-center justify-center shrink-0 border border-primary/20">
<span class="material-symbols-outlined text-sm text-primary">check_circle</span>
</div>
<span class="flex-1 font-medium">Geçerli Ehliyet (&gt;2 Yıl)</span>
</div>
<div class="flex items-center gap-3 text-sm text-text-main p-2 rounded-lg opacity-60">
<div class="size-7 rounded-lg bg-orange-900/30 flex items-center justify-center shrink-0 border border-orange-800/30">
<span class="material-symbols-outlined text-sm text-orange-400">priority_high</span>
</div>
<span class="flex-1 text-gray-500 line-through decoration-gray-600 font-medium">Önceki Kiralama Hasarı</span>
</div>
</div>
</div>
<div class="bg-gradient-to-r from-primary/10 via-primary/5 to-primary/10 p-4 border-t border-primary/20">
<div class="flex items-center justify-center gap-2">
<span class="material-symbols-outlined text-primary text-base">auto_awesome</span>
<p class="text-xs text-center text-primary font-semibold">
                            Yapay Zeka Güven Skoru: <span id="ai-score-level" class="uppercase">Yüksek</span>
                        </p>
</div>
</div>
</div>
</div>
<div class="bg-gradient-to-br from-blue-900/30 via-blue-900/20 to-blue-900/30 rounded-xl p-5 border border-blue-900/50 backdrop-blur-sm card-hover">
<div class="flex gap-3">
<div class="size-10 rounded-lg bg-blue-500/20 flex items-center justify-center shrink-0 border border-blue-500/30">
<span class="material-symbols-outlined text-blue-400 text-xl">bolt</span>
</div>
<div class="flex-1">
<h4 class="font-bold text-sm text-blue-100 mb-1 flex items-center gap-2">
<span>Hızlı Geçiş Aktif</span>
<span class="px-2 py-0.5 rounded-full bg-blue-500/30 text-blue-300 text-[10px] font-bold border border-blue-500/50">HIZLI</span>
</h4>
<p class="text-xs text-blue-300 leading-relaxed">
                                Bu müşteri hızlı işlem için uygundur. Standart araçlar için depozito gerekmez.
                            </p>
</div>
</div>
</div>
</div>
</div>
</main>
<div class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4 animate-fade-in-up" id="contract-modal">
<div class="bg-surface-card w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] border border-border-color animate-fade-in-up" style="animation-delay: 0.1s">
<div class="px-6 py-5 border-b border-border-color flex justify-between items-center bg-gradient-to-r from-surface-raised/90 to-surface-raised/70 backdrop-blur-sm">
<div class="flex items-center gap-3">
<div class="size-10 bg-gradient-to-br from-green-900/40 to-green-800/30 rounded-xl flex items-center justify-center text-primary border border-green-800/30 shadow-lg shadow-green-900/20">
<span class="material-symbols-outlined text-xl">description</span>
</div>
<div>
<h3 class="font-bold text-text-main text-lg">Sözleşme Önizlemesi</h3>
<p class="text-xs text-text-sub flex items-center gap-1 mt-0.5">
<span class="material-symbols-outlined text-xs">tag</span>
Ref: <span id="contract-ref" class="font-mono font-semibold text-primary">#RNT-2023-8894</span>
</p>
</div>
</div>
<button type="button" onclick="closeContractModal()" class="size-8 rounded-lg text-text-sub hover:text-text-main hover:bg-surface-raised transition-all flex items-center justify-center">
<span class="material-symbols-outlined text-xl">close</span>
</button>
</div>
<div class="flex-1 overflow-y-auto bg-background-main p-6">
<div class="bg-gradient-to-br from-surface-raised to-surface-card w-full aspect-[1/1.4] shadow-lg p-8 mx-auto max-w-[500px] text-[10px] text-gray-400 flex flex-col gap-4 border border-border-color rounded-lg relative overflow-hidden">
<div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-primary-dark to-primary"></div>
<div class="w-full h-8 bg-surface-card mb-4 rounded"></div>
<div class="w-3/4 h-2 bg-surface-card rounded"></div>
<div class="w-full h-2 bg-surface-card rounded"></div>
<div class="w-full h-2 bg-surface-card rounded"></div>
<div class="w-5/6 h-2 bg-surface-card rounded"></div>
<br/>
<div class="grid grid-cols-2 gap-4">
<div class="h-20 bg-surface-card border-2 border-dashed border-gray-700 rounded"></div>
<div class="h-20 bg-surface-card border-2 border-dashed border-gray-700 rounded"></div>
</div>
<br/>
<div class="w-full h-2 bg-surface-card rounded"></div>
<div class="w-full h-2 bg-surface-card rounded"></div>
<div class="mt-auto w-1/2 h-10 border-b-2 border-gray-700"></div>
</div>
</div>
<div class="p-6 bg-surface-card border-t border-border-color">
<div class="flex items-center justify-between mb-4 p-3 rounded-lg bg-primary/10 border border-primary/20">
<div class="flex items-center gap-2 text-primary text-sm font-semibold">
<span class="material-symbols-outlined text-lg animate-pulse-slow">check_circle</span>
<span>Sözleşme <span class="font-mono">02:00</span> içinde hazır</span>
</div>
<span class="text-xs text-text-sub flex items-center gap-1">
<span class="material-symbols-outlined text-xs">schedule</span>
Müşteri imzası bekleniyor
</span>
</div>
<div class="flex gap-3">
<button onclick="editContractDetails()" class="flex-1 py-3 px-4 rounded-lg border border-border-color text-text-main font-medium hover:bg-surface-raised hover:border-primary/50 transition-all flex items-center justify-center gap-2">
<span class="material-symbols-outlined text-lg">edit</span>
<span>Detayları Düzenle</span>
</button>
<button onclick="requestCustomerApproval()" class="flex-[2] py-3 px-4 rounded-lg bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white font-bold shadow-lg shadow-primary/30 transition-all flex items-center justify-center gap-2 hover:shadow-primary/40">
<span class="material-symbols-outlined text-xl">draw</span>
<span>Müşteri Dijital Onayı</span>
</button>
</div>
</div>
</div>
</div>

<script>
    // Gün sayısı kontrolü
    function increaseDays() {
        const daysInput = document.getElementById('rental-days');
        const currentValue = parseInt(daysInput.value) || 3;
        if (currentValue < 365) {
            daysInput.value = currentValue + 1;
        }
    }

    function decreaseDays() {
        const daysInput = document.getElementById('rental-days');
        const currentValue = parseInt(daysInput.value) || 3;
        if (currentValue > 1) {
            daysInput.value = currentValue - 1;
        }
    }

    // Risk skoru güncelleme
    function updateRiskScore() {
        const customerId = document.getElementById('customer-id').value;
        const licenseNumber = document.getElementById('license-number').value;
        const customerName = document.getElementById('customer-name').value;
        
        // Basit risk hesaplama simülasyonu
        let riskScore = 85;
        let riskStatus = 'Güvenli';
        let riskColor = '#17cf73';
        
        if (customerId && customerId.length >= 11) {
            // TC kimlik doğrulandı
            riskScore = Math.min(95, riskScore + 5);
        }
        
        if (licenseNumber && licenseNumber.length > 0) {
            // Ehliyet doğrulandı
            riskScore = Math.min(95, riskScore + 5);
        }
        
        if (!customerName || customerName.length < 3) {
            // Eksik bilgi
            riskScore = Math.max(50, riskScore - 10);
        }
        
        // Risk durumunu belirle
        if (riskScore >= 80) {
            riskStatus = 'Güvenli';
            riskColor = '#17cf73';
        } else if (riskScore >= 60) {
            riskStatus = 'Orta Risk';
            riskColor = '#f59e0b';
        } else {
            riskStatus = 'Yüksek Risk';
            riskColor = '#ef4444';
        }
        
        // UI güncelleme
        document.getElementById('risk-score').textContent = riskScore;
        document.getElementById('risk-status').textContent = riskStatus;
        document.getElementById('risk-status').style.color = riskColor;
        
        // Daire güncelleme
        const circle = document.getElementById('risk-circle');
        const percentage = riskScore;
        circle.setAttribute('stroke-dasharray', `${percentage}, 100`);
        circle.style.stroke = riskColor;
        
        // AI skor seviyesi güncelleme
        const aiScoreLevel = document.getElementById('ai-score-level');
        if (aiScoreLevel) {
            if (riskScore >= 80) {
                aiScoreLevel.textContent = 'Yüksek';
                aiScoreLevel.className = 'uppercase text-primary';
            } else if (riskScore >= 60) {
                aiScoreLevel.textContent = 'Orta';
                aiScoreLevel.className = 'uppercase text-amber-400';
            } else {
                aiScoreLevel.textContent = 'Düşük';
                aiScoreLevel.className = 'uppercase text-red-400';
            }
        }
        
        // Risk badge animasyonu
        const riskBadge = document.querySelector('.risk-badge');
        if (riskBadge) {
            riskBadge.classList.add('animate');
            setTimeout(() => riskBadge.classList.remove('animate'), 1000);
        }
    }

    // Sözleşme oluşturma
    function createContract() {
        const customerId = document.getElementById('customer-id').value;
        const customerName = document.getElementById('customer-name').value;
        const vehicleSelect = document.getElementById('vehicle-select').value;
        const startDate = document.getElementById('start-date').value;
        const rentalDays = document.getElementById('rental-days').value;
        
        // Form validasyonu
        if (!customerId || customerId.length < 11) {
            alert('Lütfen geçerli bir T.C. Kimlik No giriniz.');
            return;
        }
        
        if (!customerName || customerName.length < 3) {
            alert('Lütfen müşteri adını giriniz.');
            return;
        }
        
        if (!vehicleSelect || vehicleSelect === '') {
            alert('Lütfen bir araç seçiniz.');
            return;
        }
        
        if (!startDate) {
            alert('Lütfen kiralama başlangıç tarihini seçiniz.');
            return;
        }
        
        // Loading state
        const btn = document.getElementById('create-contract-btn');
        const originalBtnContent = btn ? btn.innerHTML : '';
        if (btn) {
            btn.disabled = true;
            btn.classList.add('opacity-75', 'cursor-not-allowed');
            btn.innerHTML = '<span class="material-symbols-outlined animate-spin text-xl">sync</span><span>Sözleşme Oluşturuluyor...</span>';
        }
        
        // Simüle edilmiş işlem
        setTimeout(() => {
            // Sözleşme referans numarası oluştur
            const contractRef = '#RNT-' + new Date().getFullYear() + '-' + Math.floor(Math.random() * 9000 + 1000);
            document.getElementById('contract-ref').textContent = contractRef;
            
            // Modal'ı göster
            const modal = document.getElementById('contract-modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // Butonu eski haline getir
            if (btn) {
                btn.disabled = false;
                btn.classList.remove('opacity-75', 'cursor-not-allowed');
                btn.innerHTML = originalBtnContent;
            }
        }, 1500);
    }

    // Modal kapatma
    function closeContractModal() {
        const modal = document.getElementById('contract-modal');
        modal.classList.add('hidden');
        modal.classList.remove('flex');
    }

    // ESC tuşu ile modal kapatma
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeContractModal();
        }
    });

    // Modal dışına tıklayınca kapatma
    document.getElementById('contract-modal')?.addEventListener('click', function(e) {
        if (e.target === this) {
            closeContractModal();
        }
    });

    // Araç seçimi değiştiğinde fiyat hesaplama
    function updateVehiclePrice() {
        const vehicleSelect = document.getElementById('vehicle-select');
        const selectedVehicle = vehicleSelect.value;
        // Araç seçildiğinde risk skorunu güncelle
        updateRiskScore();
    }
    
    // Sözleşme detaylarını düzenleme
    function editContractDetails() {
        alert('Sözleşme detayları düzenleme formu açılacak. (Demo)');
    }
    
    // Müşteri dijital onayı isteme
    function requestCustomerApproval() {
        const customerName = document.getElementById('customer-name').value || 'Müşteri';
        if (confirm(`${customerName} adlı müşteriye dijital onay isteği gönderilsin mi?`)) {
            alert('Dijital onay isteği müşteriye gönderildi! (Demo)');
            // Modal'ı kapat
            closeContractModal();
        }
    }
    
    // Tarih değiştiğinde bitiş tarihini otomatik hesapla
    function calculateEndDate() {
        const startDateInput = document.getElementById('start-date');
        const daysInput = document.getElementById('rental-days');
        const endDateDisplay = document.getElementById('end-date-display');
        const endDateValue = document.getElementById('end-date-value');
        
        if (startDateInput.value && daysInput.value && endDateDisplay && endDateValue) {
            const startDate = new Date(startDateInput.value);
            const days = parseInt(daysInput.value) || 3;
            const endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + days);
            
            // Tarih formatını düzenle
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            const formattedDate = endDate.toLocaleDateString('tr-TR', options);
            
            endDateValue.textContent = formattedDate;
            endDateDisplay.classList.remove('hidden');
            endDateDisplay.classList.add('animate-slide-in');
        } else if (endDateDisplay) {
            endDateDisplay.classList.add('hidden');
        }
    }
    
    // Araç seçimi değiştiğinde bilgi göster
    function showVehicleInfo() {
        const vehicleSelect = document.getElementById('vehicle-select');
        const vehicleInfo = document.getElementById('vehicle-info');
        const vehicleDetails = document.getElementById('vehicle-details');
        
        if (vehicleSelect.value && vehicleInfo && vehicleDetails) {
            const selectedText = vehicleSelect.options[vehicleSelect.selectedIndex].text;
            vehicleDetails.textContent = `Seçilen: ${selectedText}`;
            vehicleInfo.classList.remove('hidden');
            vehicleInfo.classList.add('animate-slide-in');
        } else if (vehicleInfo) {
            vehicleInfo.classList.add('hidden');
        }
    }
    
    // Form alanları için gerçek zamanlı validasyon
    function validateField(fieldId, validationType) {
        const field = document.getElementById(fieldId);
        if (!field) return;
        
        const value = field.value.trim();
        let isValid = true;
        let errorMessage = '';
        
        switch(validationType) {
            case 'tc':
                if (value && (value.length !== 11 || !/^\d+$/.test(value))) {
                    isValid = false;
                    errorMessage = 'TC Kimlik No 11 haneli olmalıdır';
                }
                break;
            case 'license':
                if (value && !/^[A-Z]-\d{3}-\d{3}$/i.test(value)) {
                    isValid = false;
                    errorMessage = 'Geçerli bir ehliyet numarası giriniz (örn: E-123-456)';
                }
                break;
            case 'name':
                if (value && value.length < 3) {
                    isValid = false;
                    errorMessage = 'Ad soyad en az 3 karakter olmalıdır';
                }
                break;
        }
        
        // Hata göster/gizle
        let errorDiv = field.parentElement.querySelector('.error-message');
        if (!isValid && value) {
            if (!errorDiv) {
                errorDiv = document.createElement('div');
                errorDiv.className = 'error-message text-red-400 text-xs mt-1';
                field.parentElement.appendChild(errorDiv);
            }
            errorDiv.textContent = errorMessage;
            field.classList.add('border-red-500');
        } else {
            if (errorDiv) errorDiv.remove();
            field.classList.remove('border-red-500');
        }
        
        return isValid;
    }
    
    // Input değişikliklerini dinle
    document.addEventListener('DOMContentLoaded', function() {
        // TC Kimlik validasyonu
        const customerIdInput = document.getElementById('customer-id');
        if (customerIdInput) {
            customerIdInput.addEventListener('input', function() {
                validateField('customer-id', 'tc');
                updateRiskScore();
            });
            customerIdInput.addEventListener('blur', function() {
                validateField('customer-id', 'tc');
            });
        }
        
        // Ehliyet validasyonu
        const licenseInput = document.getElementById('license-number');
        if (licenseInput) {
            licenseInput.addEventListener('input', function() {
                validateField('license-number', 'license');
                updateRiskScore();
            });
            licenseInput.addEventListener('blur', function() {
                validateField('license-number', 'license');
            });
        }
        
        // Ad soyad validasyonu
        const nameInput = document.getElementById('customer-name');
        if (nameInput) {
            nameInput.addEventListener('input', function() {
                validateField('customer-name', 'name');
                updateRiskScore();
            });
            nameInput.addEventListener('blur', function() {
                validateField('customer-name', 'name');
            });
        }
        
        // Araç seçimi değişikliği
        const vehicleSelect = document.getElementById('vehicle-select');
        if (vehicleSelect) {
            vehicleSelect.addEventListener('change', function() {
                updateVehiclePrice();
                updateRiskScore();
                showVehicleInfo();
            });
        }
        
        // Tarih değişikliği
        const startDateInput = document.getElementById('start-date');
        if (startDateInput) {
            if (!startDateInput.value) {
                const today = new Date().toISOString().split('T')[0];
                startDateInput.value = today;
            }
            startDateInput.addEventListener('change', calculateEndDate);
        }
        
        // Gün sayısı input kontrolü
        const daysInput = document.getElementById('rental-days');
        if (daysInput) {
            daysInput.addEventListener('change', function() {
                let value = parseInt(this.value) || 3;
                if (value < 1) value = 1;
                if (value > 365) value = 365;
                this.value = value;
                calculateEndDate();
                updateRiskScore();
            });
            daysInput.addEventListener('input', calculateEndDate);
        }
        
        // İlk yüklemede bitiş tarihini hesapla
        setTimeout(() => {
            calculateEndDate();
        }, 100);
    });
    
</script>

</body></html>